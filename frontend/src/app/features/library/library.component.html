
<main id="content" class="container-fluid bg-black-primary pt-5 mt-5">
    <div class="row">
        <div class="col-2 bg-black-primary">
        </div>

        <div id="content-library" class="col-10 p-4 pt-0">
            <div *ngIf="notifyTitle !== ''" class="alert alert-dismissible fade show" role="alert" id="fixedAlert" [ngClass]="isSuccess ? 'alert-success' : 'alert-danger'">
                <strong>{{ notifyTitle }}</strong> {{ notifyContent }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            <h2 class="text-center text-white-primary">THƯ VIỆN</h2>

            <!-- PLAYLIST EMPTY -->

            <!-- <div id="no-playlist">
                <img id="empty-list-songs-img" src="../../public/images/other/Empty-songs.png" alt="" class="mx-auto d-block">
                <h3 class="text-white-primary text-center">Bạn chưa thêm bài hát yêu thích!</h3>
            </div> -->

            <div id="have-playlist mb-5">
                <!-- PLAYLIST TITLE -->

                <div class="d-flex library-title">
                    <h3 class="text-white-primary me-4">PLAYLIST</h3>
                    <div class="btn rounded-circle bg-dark_grey-color" data-bs-toggle="modal" data-bs-target="#myModal">
                        <i class="fa-solid fa-plus text-white-primary"></i>
                    </div>
                    <div class="modal" id="myModal">
                        <div class="modal-dialog modal-sm">
                            <div class="modal-content bg-dark_grey-color">

                                <!-- Modal Header -->
                                <div class="modal-header border-0 d-flex justify-content-between">
                                    <h4 class="modal-title text-white-primary">Tạo Playlist</h4>
                                    <button type="button" class="btn ms-3 text-white-primary refer" data-bs-dismiss="modal" #closeButtonRef>
                                        <i class="fa-solid fa-xmark"></i>
                                    </button>
                                </div>

                                <!-- Modal body -->
                                <div class="modal-body">
                                    <form (submit)="addPlaylist(); $event.preventDefault()">
                                        <input
                                          type="text"
                                          [(ngModel)]="newPlaylistName"
                                          name="playlistName"
                                          class="form-control no-outline border-bottom shadow-none rounded-0 ps-0 bg-dark_grey-color text-white-primary"
                                          autocomplete="off"
                                          placeholder="Nhập tên playlist..."
                                        />
                                        <button type="submit" class="btn text-white-primary bg-orange-primary w-100 mt-3">Tạo</button>
                                    </form>                                      
                                </div>

                            </div>
                        </div>
                    </div>
                </div>

                <!-- PLAYLIST -->

                <div class="row">

                    <ng-container *ngIf="playlists.length > 0; else noPlaylist">

                        <app-playlist-card
                        class="col-12 col-sm-6 col-md-3 col-lg-2"
                        *ngFor="let playlist of playlists"
                        [playlist]="playlist"
                        (playlistDetail)="showSongs($event)"
                        (deleted)="removePlaylist($event)"
                        (renamed)="updatePlaylistName($event)"
                        (playlistSelect)="playlistSelect($event)">
                        </app-playlist-card>

                    </ng-container>
                  
                    <ng-template #noPlaylist>
                      <div id="no-playlist">
                        <img id="empty-list-songs-img" src="../../assets/images/other/Empty-songs.png" alt="" class="mx-auto d-block">
                        <h3 class="text-white-primary text-center">Bạn chưa thêm bài hát yêu thích!</h3>
                      </div>
                    </ng-template>
                  </div>
            </div>

            <div *ngIf="quantity > 0 && playlist" id="have-list-songs-favorite mt-5">
                <h3 class="text-white-primary me-4 pt-5">Danh sách bài hát thuộc Playlist {{ playlist.playlistName }}</h3>

                <ul class="text-support ps-0 row">
                    <li class="mt-3 p-2 rounded-2">
                        <div class="d-flex row">
                            <div class="fw-bolder col-lg-5">
                                BÀI HÁT
                            </div>
                            <div class="fw-bolder col-lg-4">
                                ALBUM
                            </div>
                            <div class="fw-bolder col-lg-2">
                                THỜI LƯỢNG
                            </div>
                        </div>
                    </li>

                    <app-row-card class="rounded-2 col-md-6 col-lg-12 favorite-song"
                        *ngFor="let song of songs"
                        [song]="song"
                        [isOwner]="false"
                        [userPlaylists]="playlists"
                        [isLibrary]="true"
                        ></app-row-card>

                </ul>
            </div>


        </div>


    </div>
</main>